[{"content":"å‰è¨€ å‰æ®µæ—¶é—´è¯•ç€æŠŠä¸€äº›è€æœåŠ¡å‡çº§äº†ä¸€ä¸‹ï¼Œæœ‰ä¸€äº›ä¹Ÿç§»è¿›äº†å®¹å™¨é‡Œï¼Œç”¨ Podman è·‘ rootless containerã€‚å› ä¸ºå¤–å±‚çš„ Nginx æ²¡æœ‰åŠ¨ï¼Œæœ¬ä»¥ä¸ºèƒ½å¿«é€Ÿè¿ç§»ï¼Œä½†å¯åŠ¨ container åæœåŠ¡å¹¶æœªæ­£å¸¸è¿è¡Œï¼Œæ‰§è¡Œsystemctl --user status someServiceæ˜¾ç¤ºæœåŠ¡ä¸ºactiveï¼Œå¹¶æ²¡æœ‰é”™è¯¯ä¿¡æ¯ã€‚é‡æ–°å°è¯•åä»ç„¶å­˜åœ¨é—®é¢˜,å®¢æˆ·ç«¯å‡ºç° 502 Bad Gateway é”™è¯¯ï¼Œé‚è¿›è¡Œé—®é¢˜å®šä½ã€‚\nå®šä½é—®é¢˜ ç›¸å…³é…ç½® å› ä¸ºä»…æ˜¯éƒ¨åˆ†æœåŠ¡è¿ç§»åˆ°å®¹å™¨ï¼ŒåŸæœ¬çš„ Nginx æœåŠ¡å¹¶æ²¡æœ‰å˜åŠ¨ï¼Œç›¸å…³é…ç½®ä¸º\nlocation /somePath { proxy_redirect off; proxy_pass http://127.0.0.1:8000; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \u0026#34;upgrade\u0026#34;; proxy_set_header Host $http_host; } å®¹å™¨ä½¿ç”¨ Podman åœ¨æ™®é€šç”¨æˆ·ä¸‹è¿è¡Œï¼Œæ‰§è¡Œå‚æ•°ä¸º\n-p 8000:3000 -v ./someDir/:/etc/some/config/:rw æœåŠ¡æœ¬å£°ä¹Ÿå¹¶æ²¡æœ‰å˜åŠ¨ï¼Œç›¸å…³é…ç½®ä¸æ•°æ®ä¹Ÿç»´æŒåŸæ ·å¹¶è¿›è¡Œæ˜ å°„ã€‚\né”™è¯¯ä¿¡æ¯ å®¢æˆ·ç«¯æŸ¥çœ‹ log åå‘ç°æŠ¥é”™ï¼š\nFailed to dial to wss://someSite/somePath 502 Bad Gateway websocket: bad handshake ä½†æ²¡æœ‰é¢å¤–ä¿¡æ¯ï¼Œåˆæ­¥åˆ¤æ–­ä¸º Nginx æ— æ³•è¿é€šå­æœåŠ¡ï¼Œä»è€Œäº§ç”Ÿ 502 Bad Gateway é”™è¯¯ã€‚\né—®é¢˜æ’æŸ¥  æµ‹è¯•ç¡®è®¤ Nginx èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œå…¶ä»–è·¯å¾„ä¸‹éå®¹å™¨å†…çš„æœåŠ¡éƒ½æ­£å¸¸è¿è¡Œ åœ¨åŒå‚æ•°ä¸‹è¿è¡Œpodman run busybox ls -alï¼Œç¡®è®¤é…ç½®æ–‡ä»¶ä¸æ•°æ®èƒ½è¢« container æ­£å¸¸è·å– host ä¸‹ç›´æ¥è¿æ¥ container çš„ WebSocketï¼Œå¤±è´¥ï¼Œæ˜¾ç¤º 502 systemctl --user statusæ˜¾ç¤º container æ­£å¸¸è¿è¡Œ  äºæ˜¯ç¼©å°äº†é—®é¢˜èŒƒå›´ï¼Œåº”è¯¥æ˜¯å®¹å™¨åŒ–åçš„ç½‘ç»œæ˜ å°„å¯¼è‡´äº†é—®é¢˜ã€‚\nè§£å†³é—®é¢˜ æŸ¥é˜… podman æ–‡æ¡£1,åœ¨ podman run çš„æ–‡æ¡£ä¸­æ‰¾åˆ° --publish ä¸--networkçš„è¯´æ˜ã€‚å…¶ä¸­åˆ—å‡ºäº†ç½‘ç»œæ¨¡å¼ï¼š\n Valid mode values are:\n bridge[:OPTIONS,â€¦]: Create a network stack on the default bridge. This is the default for rootfull containers. It is possible to specify these additional options: For example to set a static ipv4 address and a static mac address, use \u0026ndash;network bridge:ip=10.88.0.10,mac=44:33:22:11:00:99. [:OPTIONS,â€¦]: Connect to a user-defined network; this is the network name or ID from a network created by podman network create. Using the network name implies the bridge network mode. It is possible to specify the same options described under the bridge mode above. You can use the \u0026ndash;network option multiple times to specify additional networks. none: Create a network namespace for the container but do not configure network interfaces for it, thus the container has no network connectivity. container:id: Reuse another containerâ€™s network stack. host: Do not create a network namespace, the container will use the hostâ€™s network. Note: The host mode gives the container full access to local system services such as D-bus and is therefore considered insecure. ns:path: Path to a network namespace to join. private: Create a new namespace for the container. This will use the bridge mode for rootfull containers and slirp4netns for rootless ones. slirp4netns[:OPTIONS,â€¦]: use slirp4netns(1) to create a user network stack. This is the default for rootless containers. It is possible to specify these additional options:   å¹¶ä¸”æ£€ç´¢åæ‰¾åˆ° stackoverflow ä¸Šçš„ä¸€ä¸ªå›ç­”2ï¼ŒæŒ‡å‡ºå®¹å™¨åŒ–ä¼šåˆ›å»º network namespaceï¼Œæ‰€ä»¥å®¹å™¨å†…éƒ¨è·å–çš„ localhost å¹¶é host ä¸‹çš„ localhostï¼Œä»è€Œå¯¼è‡´å®¹å™¨å†…æœåŠ¡ä¸èƒ½æ­£å¸¸è¿è¡Œã€‚\né€šè¿‡è®¾ç½®--net=hostè¿è¡Œå®¹å™¨ï¼Œæˆ–ä¿®æ”¹ Nginx ä¸­proxy_passçš„é…ç½®æŒ‡å‘å®é™…çš„ host ç½‘ç»œï¼Œå°±å¯ä»¥è§£å†³ 502 çš„é—®é¢˜ã€‚\nä¸€äº›å»¶ä¼¸ ä½¿ç”¨--net=hostå‚æ•°æ˜¯æœ€ç®€ä¾¿çš„è§£å†³æ–¹æ³•ï¼Œä½†ç›´æ¥ä½¿ç”¨ host ç½‘ç»œä¼šå¯¼è‡´ port å†²çªï¼Œé€ æˆå¤š container åœºæ™¯ä¸‹çš„éƒ¨ç½²é—®é¢˜ã€‚å¯¹å®¹å™¨ç½‘ç»œè¿›è¡Œé…ç½®çš„æ–¹å¼åº”è¯¥æ˜¯æ›´å¥½çš„ï¼Œä½†å¯¹äºç®€å•åœºæ™¯æ¥è¯´æœ‰äº›ä¸å¿…è¦ï¼Œä»¥åæœ‰æœºä¼šä¹Ÿå¯ä»¥å°è¯•ä¸€ä¸‹ã€‚\nå•æœºä½¿ç”¨å®¹å™¨ä¹Ÿæ˜¯æŠ±ç€å°è¯•çš„å¿ƒæ€ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½ç®€åŒ–æœåŠ¡çš„ç®¡ç†ã€‚ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°å¯¹å®¹å™¨ç›¸å…³çš„ cgroupã€ç½‘ç»œç­‰é—®é¢˜è¿˜ä¸å¤Ÿç†Ÿæ‚‰ï¼Œå°±å…ˆè®°å½•ä¸‹æ¥ï¼Œåç»­æœ‰æ—¶é—´æ—¶å¯ä»¥å­¦ä¹ ä¸€ä¸‹ç›¸å…³çŸ¥è¯†ã€‚\n  https://docs.podman.io/en/latest/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n https://stackoverflow.com/questions/38346847/nginx-docker-container-502-bad-gateway-response\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n   ","permalink":"https://jasondg.github.io/posts/container.websocket.502/","summary":"å‰è¨€ å‰æ®µæ—¶é—´è¯•ç€æŠŠä¸€äº›è€æœåŠ¡å‡çº§äº†ä¸€ä¸‹ï¼Œæœ‰ä¸€äº›ä¹Ÿç§»è¿›äº†å®¹å™¨é‡Œï¼Œç”¨ Podman è·‘ rootless containerã€‚å› ä¸ºå¤–å±‚çš„ Nginx æ²¡æœ‰åŠ¨ï¼Œæœ¬ä»¥ä¸ºèƒ½å¿«é€Ÿè¿ç§»ï¼Œä½†å¯åŠ¨ container åæœ","title":"ç«¯å£æ˜ å°„åå®¹å™¨å†… WebSocket äº§ç”Ÿ 502 Bad Gateway é”™è¯¯"},{"content":"å‰è¨€ ä¸€æ¬¡è°ƒè¯•æ—¶ï¼Œå‘ç° Firefox ä¸­å¯ä»¥é€šè¿‡ boolean å€¼æ¥ä½¿ç”¨ Array.sort()ï¼Œè€Œåœ¨ Node.js ä¸­ä»…èƒ½ä½¿ç”¨ number ç±»å‹ã€‚å°½ç®¡è¿™ä¸ªé—®é¢˜æ²¡æœ‰é€ æˆä»£ç é”™è¯¯ï¼Œä½†è¿˜æ˜¯ä¼šé€ æˆä¸€äº›å›°æƒ‘ã€‚\nJS å¼•æ“é—´å·®å¼‚ ç®€å•è¿è¡Œä¸‹æµ‹è¯•ä»£ç ï¼Œç»“æœå¦‚ä¸‹ï¼š\n Firefox  const arr = [{num:1}, {num:3}, {num:2}] const numSorted = arr.sort((a, b) =\u0026gt; a.num - b.num) console.log(numSorted) \u0026gt; Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }] const arr = [{num:1}, {num:3}, {num:2}] const boolSorted = arr.sort((a, b) =\u0026gt; a.num \u0026gt; b.num) console.log(boolSorted) \u0026gt; Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }]  Node.js  const arr = [{num:1}, {num:3}, {num:2}] const sorted = arr.sort((a, b) =\u0026gt; a.num \u0026gt; b.num) console.log(sorted) \u0026gt; [ { num: 1 }, { num: 3 }, { num: 2 } ]  Deno  const arr = [{num:1}, {num:3}, {num:2}] const sorted = arr.sort((a, b) =\u0026gt; a.num \u0026gt; b.num) console.log(sorted) \u0026gt; [ { num: 1 }, { num: 3 }, { num: 2 } ] å¯ä»¥å‘ç°ï¼ŒNode ä¸ Deno åŒæ ·ä½¿ç”¨ V8 å¼•æ“ï¼Œä»…èƒ½åœ¨ Array.sort()ä¸­ä½¿ç”¨ number ç±»å‹ä½œä¸ºåˆ¤æ–­ï¼Œè€Œ Firefox ä¸­èƒ½å¤Ÿä½¿ç”¨ number æˆ– boolean å€¼ä½œä¸ºåˆ¤æ–­ã€‚\nTypeScript ä¸­ Array.sort()çš„ç±»å‹ åœ¨ TypeScript ä¸­ Array.sort()çš„ç±»å‹ä¸º\n(method) Array\u0026lt;T\u0026gt;.sort(compareFn?: ((a: T, b: T) =\u0026gt; number) | undefined): T[] å°è¯•ä½¿ç”¨ boolean ç±»å‹çš„ sort(),ä½† TS æŠ¥å‡ºç±»å‹é”™è¯¯:\nArgument of type \u0026#39;(a: { num: number; }, b: { num: number; }) =\u0026gt; boolean\u0026#39; is not assignable to parameter of type \u0026#39;(a: { num: number; }, b: { num: number; }) =\u0026gt; number\u0026#39;. Type \u0026#39;boolean\u0026#39; is not assignable to type \u0026#39;number\u0026#39;.ts(2345) MDN æ–‡æ¡£ä¸ ECMA æ ‡å‡† æŸ¥é˜… MDN æ–‡æ¡£1ï¼Œ\n So, the compare function has the following form:\nfunction compare(a, b) { if (a is less than b by some ordering criterion) { return -1; } if (a is greater than b by the ordering criterion) { return 1; } // a must be equal to b return 0; }  è¯´æ˜ä¸­å¹¶æœªæ ‡æ˜å¯ä»¥ä½¿ç”¨ boolean å€¼ï¼Œç»§ç»­æŸ¥é˜… ECMA æ–‡æ¡£2,\n  If x and y are both undefined, return +0ğ”½. If x is undefined, return 1ğ”½. If y is undefined, return -1ğ”½. If comparefn is not undefined, then  Let v be ? ToNumber(? Call(comparefn, undefined, Â« x, y Â»)). If v is NaN, return +0ğ”½. Return v.   Let xString be ? ToString(x). Let yString be ? ToString(y). Let xSmaller be ! IsLessThan(xString, yString, true). If xSmaller is true, return -1ğ”½. Let ySmaller be ! IsLessThan(yString, xString, true). If ySmaller is true, return 1ğ”½. Return +0ğ”½.   æ ‡å‡†ä¸­åŒæ ·ä¹ŸæœªæŒ‡å‡ºå¯ä»¥ä½¿ç”¨ boolean å€¼è¿›è¡Œåˆ¤æ–­ã€‚\næ€»ç»“ Firefox ä¸­èƒ½å¤Ÿä½¿ç”¨ boolean å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¯èƒ½æ˜¯ Firefox çš„å®ç°é—®é¢˜ï¼Œåœ¨ç›¸å…³æ–‡æ¡£ä¸æ ‡å‡†ä¸­å¹¶æ²¡æœ‰ç›¸å…³è¯´æ˜ã€‚å®é™…å†™ä»£ç æ—¶ï¼Œåœ¨ lint å·¥å…·ç­‰çº¦æŸååº”è¯¥å¹¶ä¸ä¼šäº§ç”Ÿå¼‚å¸¸é—®é¢˜ï¼Œä»…æ˜¯å‡ºäºå¥½å¥‡è¿›è¡Œäº†ä¸€äº›æ£€ç´¢ï¼Œç®€å•è®°å½•ä¸€ä¸‹ã€‚\n  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.sort\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n   ","permalink":"https://jasondg.github.io/posts/firefox.sort.by.boolean/","summary":"å‰è¨€ ä¸€æ¬¡è°ƒè¯•æ—¶ï¼Œå‘ç° Firefox ä¸­å¯ä»¥é€šè¿‡ boolean å€¼æ¥ä½¿ç”¨ Array.sort()ï¼Œè€Œåœ¨ Node.js ä¸­ä»…èƒ½ä½¿ç”¨ number ç±»å‹ã€‚å°½ç®¡è¿™ä¸ªé—®é¢˜æ²¡æœ‰é€ æˆä»£ç é”™è¯¯ï¼Œä½†è¿˜æ˜¯ä¼šé€ æˆä¸€äº›å›°","title":"Firefox ä¸­ Array.sort() èƒ½å¤Ÿä½¿ç”¨ boolean å€¼è¿›è¡Œåˆ¤æ–­"},{"content":"Hello world çªç„¶èŒç”Ÿäº†ä¸€ä¸ªå¿µå¤´ï¼Œæƒ³ç€å¯ä»¥å†™å†™åšå®¢ï¼Œç®€å•åœ°è®°å½•ä¸€ç‚¹å¹³æ—¶çš„æ‰€è§æ‰€æ€ã€‚\nè¿‘æ¥çœ‹è¿‡çš„ä¸œè¥¿ä¸å°‘ï¼Œç§¯ç´¯ä¸‹æ¥çš„å´ä¸å¤šã€‚åšå®¢ä¹Ÿå°±æƒå½“æ˜¯å¤‡å¿˜å½•äº†ï¼Œå†™ä¸€å†™ï¼Œè®°ä¸€è®°ï¼Œå…´è®¸èƒ½å¤šç§¯ç´¯äº›ã€‚å³ä¾¿æ²¡ä»€ä¹ˆè·ç›Šï¼Œä»¥åå†çœ‹ï¼Œä¹Ÿç®—æ˜¯ä¸€äº›å›å¿†äº†ã€‚\nä»¥æ­¤è‡ªå‹‰ã€‚\n","permalink":"https://jasondg.github.io/posts/0/","summary":"\u003ch1 id=\"hello-world\"\u003eHello world\u003c/h1\u003e","title":"0"}]